<html lang="en">

<head>
    <meta charset="utf-8">
    <title>
        研招
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- <link rel="stylesheet" href="./plugins/swiper.min.css" type="text/css"> -->
    <!-- <link rel="stylesheet" href="./css/list.css" type="text/css"> -->
    <style>
        body {
            background-color: rgb(0 255 196 / 70%);
            width: 100vw;
            min-height: 100vh;
            overflow: hidden;
            /* padding: 2rem; */
            margin: 0;
            padding: 0 10px;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #494a4b;
            font-family: 'Gochi Hand', cursive;
            text-align: center;
            font-size: 140%;
        }

        .container {
            width: 100%;
            height: 98%;

            background: #f1f5f8;
            background-image: radial-gradient(#bfc0c1 7.2%, transparent 0);
            background-size: 25px 25px;
            border-radius: 20px;
            box-shadow: 4px 3px 7px 2px #00000040;
            /* padding: 1rem; */
            box-sizing: border-box;
        }

        .heading {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            padding-top: 1rem;
        }

        .heading__title {
            transform: rotate(2deg);
            padding: 0.2rem 1.2rem;
            border-radius: 20% 5% 20% 5%/5% 20% 25% 20%;
            background-color: rgba(0, 255, 196, 0.7);
        }

        .heading__img {
            width: 24%;
        }

        .form__label {
            display: block;
            margin-bottom: 0.5rem;
        }

        .form__input {
            box-sizing: border-box;
            background-color: transparent;
            padding: 0.7rem;
            border-bottom-right-radius: 15px 3px;
            border-bottom-left-radius: 3px 15px;
            border: solid 3px transparent;
            border-bottom: dashed 3px rgb(111 128 124);
            ;
            font-family: 'Gochi Hand', cursive;
            font-size: 1rem;
            color: rgba(63, 62, 65, 0.7);
        }

        .form__input:focus {
            outline: none;
            border: solid 3px rgb(111 128 124);
            ;
        }

        .button {
            padding: 0;
            border: none;
            transform: rotate(4deg);
            transform-origin: center;
            font-family: 'Gochi Hand', cursive;
            text-decoration: none;
            padding-bottom: 3px;
            border-radius: 5px;
            box-shadow: 0 2px 0 #494a4b;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background-image: url("data:image/gif;base64,R0lGODlhBAAEAIABAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NUY1OENCRDdDMDYxMUUyOTEzMEE1MEM5QzM0NDVBMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NUY1OENCRTdDMDYxMUUyOTEzMEE1MEM5QzM0NDVBMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk1RjU4Q0JCN0MwNjExRTI5MTMwQTUwQzlDMzQ0NUEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk1RjU4Q0JDN0MwNjExRTI5MTMwQTUwQzlDMzQ0NUEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAAQABAAAAgYEEpdoeQUAOw==");
            background-color: rgba(0, 255, 196, 0.7);
        }

        .button span {
            background: #f1f5f8;
            display: block;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            border: 2px solid #494a4b;
        }

        .button:active,
        .button:focus {
            transform: translateY(4px);
            padding-bottom: 0px;
            outline: 0;
        }

        .toDoList {
            text-align: left;
        }

        .toDoList li {
            position: relative;
            padding: 0.5rem;
        }

        .toDoList li:hover {
            text-decoration: line-through wavy #24bffb;
        }

        .todo-list {
            font-size: 20px;
            /* max-width: 15em; */
            margin: auto;
            padding: 0.5em 1em;
        }

        .todo {
            display: block;
            position: relative;
            padding: 1em 1em 1em 16%;
            margin: 0 auto;
            cursor: pointer;
            border-bottom: solid 1px #ddd;
        }

        .todo:last-child {
            border-bottom: none;
        }

        .todo__state {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
        }

        .todo__text {
            text-align: left;
            color: #135156;
            -webkit-transition: all 0.4s linear 0.4s;
            transition: all 0.4s linear 0.4s;
        }

        .todo__icon {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            height: auto;
            margin: auto;
            fill: none;
            stroke: #27FDC7;
            stroke-width: 2;
            stroke-linejoin: round;
            stroke-linecap: round;
        }

        .todo__line,
        .todo__box,
        .todo__check {
            -webkit-transition: stroke-dashoffset 0.8s cubic-bezier(0.9, 0, 0.5, 1);
            transition: stroke-dashoffset 0.8s cubic-bezier(0.9, 0, 0.5, 1);
        }

        .todo__circle {
            stroke: #27FDC7;
            stroke-dasharray: 1 6;
            stroke-width: 0;
            -webkit-transform-origin: 13.5px 12.5px;
            transform-origin: 13.5px 12.5px;
            -webkit-transform: scale(0.4) rotate(0deg);
            transform: scale(0.4) rotate(0deg);
            -webkit-animation: none 0.8s linear;
            animation: none 0.8s linear;
        }

        @-webkit-keyframes explode {
            30% {
                stroke-width: 3;
                stroke-opacity: 1;
                -webkit-transform: scale(0.8) rotate(40deg);
                transform: scale(0.8) rotate(40deg);
            }

            100% {
                stroke-width: 0;
                stroke-opacity: 0;
                -webkit-transform: scale(1.1) rotate(60deg);
                transform: scale(1.1) rotate(60deg);
            }
        }

        @keyframes explode {
            30% {
                stroke-width: 3;
                stroke-opacity: 1;
                -webkit-transform: scale(0.8) rotate(40deg);
                transform: scale(0.8) rotate(40deg);
            }

            100% {
                stroke-width: 0;
                stroke-opacity: 0;
                -webkit-transform: scale(1.1) rotate(60deg);
                transform: scale(1.1) rotate(60deg);
            }
        }

        .todo__box {
            stroke-dasharray: 56.1053, 56.1053;
            stroke-dashoffset: 0;
            -webkit-transition-delay: 0.16s;
            transition-delay: 0.16s;
        }

        .todo__check {
            stroke: #27FDC7;
            stroke-dasharray: 9.8995, 9.8995;
            stroke-dashoffset: 9.8995;
            -webkit-transition-duration: 0.32s;
            transition-duration: 0.32s;
        }

        .todo__line {
            stroke-dasharray: 168, 1684;
            stroke-dashoffset: 168;
        }

        .todo__circle {
            -webkit-animation-delay: 0.56s;
            animation-delay: 0.56s;
            -webkit-animation-duration: 0.56s;
            animation-duration: 0.56s;
        }

        .todo__state:checked~.todo__text {
            -webkit-transition-delay: 0s;
            transition-delay: 0s;
            color: #5EBEC1;
            opacity: 0.6;
        }

        .todo__state:checked~.todo__icon .todo__box {
            stroke-dashoffset: 56.1053;
            -webkit-transition-delay: 0s;
            transition-delay: 0s;
        }

        .todo__state:checked~.todo__icon .todo__line {
            stroke-dashoffset: -8;
        }

        .todo__state:checked~.todo__icon .todo__check {
            stroke-dashoffset: 0;
            -webkit-transition-delay: 0.48s;
            transition-delay: 0.48s;
        }

        .todo__state:checked~.todo__icon .todo__circle {
            -webkit-animation-name: explode;
            animation-name: explode;
        }
    </style>
</head>

<body>
    <section class="container">
        <div class="heading">
            <img class="heading__img" src="./images/laptop.svg">
            <h1 class="heading__title">考研待办清单</h1>
        </div>
        <form class="form">
            <div>
                <label class="form__label" for="todo">~ 上岸 I need to ~</label>
                <input class="form__input" type="text" id="todo" name="to-do" size="20" required>
                <button class="button"><span>添加任务</span>
                </button>
            </div>
        </form>
        <div>
            <ul class="toDoList">
            </ul>
            <svg viewBox="0 0 0 0" style="position: absolute; z-index: -1; opacity: 0;">
                <defs>
                    <linearGradient id="boxGradient" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="25" y2="25">
                        <stop offset="0%" stop-color="#27FDC7" />
                        <stop offset="100%" stop-color="#0FC0F5" />
                    </linearGradient>

                    <linearGradient id="lineGradient">
                        <stop offset="0%" stop-color="#0FC0F5" />
                        <stop offset="100%" stop-color="#27FDC7" />
                    </linearGradient>

                    <path id="todo__line" stroke="url(#lineGradient)" d="M21 12.3h168v0.1z"></path>
                    <path id="todo__box" stroke="url(#boxGradient)"
                        d="M21 12.7v5c0 1.3-1 2.3-2.3 2.3H8.3C7 20 6 19 6 17.7V7.3C6 6 7 5 8.3 5h10.4C20 5 21 6 21 7.3v5.4">
                    </path>
                    <path id="todo__check" stroke="url(#boxGradient)" d="M10 13l2 2 5-5"></path>
                    <circle id="todo__circle" cx="13.5" cy="12.5" r="10"></circle>
                </defs>
            </svg>


            <div class="todo-list">
                <label class="todo">
                    <input class="todo__state" type="checkbox" />

                    <svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
                        viewBox="0 0 200 25" class="todo__icon">
                        <use xlink:href="#todo__line" class="todo__line"></use>
                        <use xlink:href="#todo__box" class="todo__box"></use>
                        <use xlink:href="#todo__check" class="todo__check"></use>
                        <use xlink:href="#todo__circle" class="todo__circle"></use>
                    </svg>

                    <div class="todo__text">写下今日考研计划吧！</div>

                </label>

                <label class="todo">

                    <input class="todo__state" type="checkbox" checked />

                    <svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
                        viewBox="0 0 200 25" class="todo__icon">
                        <use xlink:href="#todo__line" class="todo__line"></use>
                        <use xlink:href="#todo__box" class="todo__box"></use>
                        <use xlink:href="#todo__check" class="todo__check"></use>
                        <use xlink:href="#todo__circle" class="todo__circle"></use>
                    </svg>

                    <div class="todo__text">每天一小步，考研一大步</div>

                </label>

                <label class="todo">
                    <input class="todo__state" type="checkbox" checked />

                    <svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
                        viewBox="0 0 200 25" class="todo__icon">
                        <use xlink:href="#todo__line" class="todo__line"></use>
                        <use xlink:href="#todo__box" class="todo__box"></use>
                        <use xlink:href="#todo__check" class="todo__check"></use>
                        <use xlink:href="#todo__circle" class="todo__circle"></use>
                    </svg>

                    <div class="todo__text">道路千万条，考研第一条，考研不努力，亲人两行泪。</div>
                </label>
            </div>
        </div>
    </section>

    <script src="./plugins/jquery-3.5.1.min.js"></script>
    <!-- <script src="./plugins/swiper.min.js" type="text/javascript"></script> -->
    <script type="text/javascript">
        // var arr = [{ "toDoItem": "道路千万条，考研第一条，考研不努力，亲人两行泪。", "id": "1", "checked": true },
        // { "toDoItem": "道路千万条，考研第一条，考研不努力，亲人两行泪。", "id": "2", "checked": true },
        // { "toDoItem": "道路千万条，考研第一条，考研不努力，亲人两行泪。", "id": "3", "checked": false },];

        var getArr = JSON.parse(localStorage.getItem('todo')) || [];
        console.log(getArr);
        if (getArr.length) {
            $.each(getArr, function (index, value) {
                console.log(value.checked)
                const content = ` <label class="todo">
<input class="todo__state" type="checkbox" ${value.checked ? 'checked' : ""} data-id="${value.id}"/>
<svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
    viewBox="0 0 200 25" class="todo__icon">
    <use xlink:href="#todo__line" class="todo__line"></use>
    <use xlink:href="#todo__box" class="todo__box"></use>
    <use xlink:href="#todo__check" class="todo__check"></use>
    <use xlink:href="#todo__circle" class="todo__circle"></use>
</svg>
<div class="todo__text">${value.toDoItem}</div>
</label>`;
                var entry = $(content);
                // const li = document.createElement('li')
                // li.setAttribute("data-id", itemId);
                // li.innerText = toDoItem
                $(".todo-list").prepend(entry);
            });
        }
        // localStorage.setItem('todo', JSON.stringify(arr));
        (() => {
            // state variables
            let toDoListArray = [];
            let itemId;
            // ui variables
            const form = document.querySelector(".form");
            const input = form.querySelector(".form__input");
            const ul = document.querySelector(".toDoList");
            const list = document.querySelector(".todo-list");
            // event listeners
            form.addEventListener('submit', e => {
                // prevent default behaviour - Page reload
                e.preventDefault();
                // give item a unique ID
                itemId = String(Date.now());
                // get/assign input value and pass through to functions
                let toDoItem = input.value;
                addItemToDOM(toDoItem);
                addItemToArray(toDoItem);
                // clear the input box. (this is default behaviour but we got rid of that)
                input.value = '';
            })

            ul.addEventListener('click', e => {
                let id = e.target.getAttribute('data-id')
                if (!id) return // user clicked in something else      
                //pass id through to functions
                removeItemFromDOM(id);
                removeItemFromArray(id);
            })

            // functions 
            function addItemToDOM(toDoItem) {
                const content = ` <label class="todo">
<input class="todo__state" type="checkbox" />
<svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
    viewBox="0 0 200 25" class="todo__icon">
    <use xlink:href="#todo__line" class="todo__line"></use>
    <use xlink:href="#todo__box" class="todo__box"></use>
    <use xlink:href="#todo__check" class="todo__check"></use>
    <use xlink:href="#todo__circle" class="todo__circle"></use>
</svg>
<div class="todo__text">${toDoItem}</div>
</label>`;
                var entry = $(content);
                // const li = document.createElement('li')
                // li.setAttribute("data-id", itemId);
                // li.innerText = toDoItem
                $(".todo-list").prepend(entry);

            }

            function addItemToArray(toDoItem) {
                // add item to array as an object with an ID so we can find and delete it later
                const id = itemId;
                getArr.push({
                    toDoItem, id, checked: false
                });
                localStorage.setItem('todo', JSON.stringify(getArr));
            }

            function removeItemFromDOM(id) {
                // get the list item by data ID
                var li = document.querySelector('[data-id="' + id + '"]');
                // remove list item
                ul.removeChild(li);
            }

            function removeItemFromArray(id) {
                // create a new toDoListArray with all li's that don't match the ID
                toDoListArray = toDoListArray.filter(item => item.id !== id);
            }

        })();
        $(document).ready(function () {

            $('.todo').on('click', 'input:checked', function () {
                console.log(this.getAttribute('data-id'));
                let id = this.getAttribute('data-id')
                $.each(getArr, function (index, value) {
                    console.log(index);
                    console.log(getArr)
                    if (id == value.id) {
                        console.log(getArr[index].id);
                        getArr[index].checked = true;
                        console.log(getArr);
                        localStorage.setItem('todo', JSON.stringify(getArr));
                    }

                });
            });
            // setTimeout(function () {
            //     document.querySelector('input[type="checkbox"]').setAttribute('checked', true);
            // }, 100);

        })

    </script>
</body>

</html>